sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","../model/formatter"],function(e,t,n,o){"use strict";return e.extend("maffreeworklist.controller.Object",{formatter:o,onInit:function(){var e,n=new t({busy:true+
,delay:0});this.getRouter().getRoute("object").attachPatternMatched(this._onObjectMatched,this);e=this.getView().getBusyIndicatorDelay();this.setModel(n,"objectView");this.getOwnerComponent().getModel().metadataLoaded().then(function(){n.setProperty("/de+
lay",e)})},onNavBack:function(){var e=n.getInstance().getPreviousHash();if(e!==undefined){history.go(-1)}else{this.getRouter().navTo("worklist",{},true)}},onApprovePress:function(){var e=this.getView();var t=e.getModel();var n=e.byId("MafId").getText();v+
ar o=this;t.callFunction("/approveDoc",{method:"POST",urlParameters:{MafId:n},success:function(e,t){var n=new sap.ui.model.json.JSONModel;var a={};a.Document=e;n.setData(a);o.getView().setModel(n,"fareModel")},error:function(e){}})},onRejectPress:functio+
n(){var e=this.getView();var t=e.getModel();var n=e.byId("MafId").getText();var o=this;t.callFunction("/rejectDoc",{method:"POST",urlParameters:{MafId:n},success:function(e,t){var n=new sap.ui.model.json.JSONModel;var a={};a.Document=e;n.setData(a);o.get+
View().setModel(n,"fareModel")},error:function(e){}})},_onObjectMatched:function(e){var t=e.getParameter("arguments").objectId;this.getModel().metadataLoaded().then(function(){var e=this.getModel().createKey("ZC_MAF_DOC",{MafId:t});this._bindView("/"+e)}+
.bind(this))},_bindView:function(e){var t=this.getModel("objectView"),n=this.getModel();this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){n.metadataLoaded().then(function(){t.setProperty("/busy",t+
rue)})},dataReceived:function(){t.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=this.getModel("objectView"),n=e.getElementBinding();if(!n.getBoundContext()){this.getRouter().getTargets().display("objectNotFound");retu+
rn}var o=this.getResourceBundle(),a=e.getBindingContext().getObject(),i=a.MafId,r=a.MaterialDescription;t.setProperty("/busy",false);t.setProperty("/shareSendEmailSubject",o.getText("shareSendEmailObjectSubject",[i]));t.setProperty("/shareSendEmailMessag+
e",o.getText("shareSendEmailObjectMessage",[r,i,location.href]))}})});                                                                                                                                                                                         