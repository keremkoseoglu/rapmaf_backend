sap.ui.define(["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("sap.ui.table.sample.Selection.Controller",{onInit:function(){this.sMafId="";var e=sap.ui.core.UIComponent.getRouterFor(this);e.getRoute("r_doc_prod").attachPatternMatc+
hed(this.loadProd,this)},loadProd:function(e){var t=e.getParameter("arguments").iv_mafid;this.sMafId=t;var a="/ZC_MAF_DOC('"+t+"')";var r=this.getView();r.bindElement({path:a})},onSavePress:function(e){var t=this.getView();var a=t.getModel();var r=t.byId+
("treeTable");var s=r.getRows();for(var o=0;o<s.length;o++){var n=s[o].getCells();var i=n[3].getValue();if(i==""){continue}var d="Production(MafId='"+this.sMafId+"',ComponentId=guid'"+i+"')";var u=a.oData[d];u.ParentId=n[4].getValue();u.Material=n[0].get+
Value();u.Quantity=n[1].getValue();u.Uom=n[2].getValue();u.BomLevel=parseInt(n[5].getValue());var l="/"+d;a.update(l,u,{success:function(e,t){sap.m.MessageToast.show("Updated successfully")},error:function(e){sap.m.MessageToast.show("Error")}})}},onDelPr+
ess:function(e){var t=this.getView();var a=t.getModel();var r=t.byId("treeTable");var s=r.getSelectedIndex();if(s<0){return}var o=r.getRows();var n=o[s];var i=n.getCells();var d=i[3].getValue();if(d==""){return}var u="/Production(MafId='"+this.sMafId+"',+
ComponentId=guid'"+d+"')";a.remove(u);a.refresh()},onCreatePress:function(e){var t=this.getView();var a=t.getModel();var r=t.byId("treeTable");var s=r.getContextByIndex(r.getSelectedIndex()).getObject();var o={MafId:this.sMafId,ParentId:s.ComponentId,Mat+
erial:s.Material,BomLevel:s.BomLevel+1};a.create("/Production",o,{success:function(e,t){sap.m.MessageToast.show("Created successfully")},error:function(e){sap.m.MessageToast.show(JSON.parse(e.responseText).error.message.value)}})}})});                    